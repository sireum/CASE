Connection Tests
================

These tests exercise the various types of connections
generated by the AADL translator.

- testdpmon  : simple data port monitor
- testepmon  : simple event port monitor
- testevent  : simple seL4 notifications
- testshare  : simple shared memory connection
- testsubprogram : simple subprogram access and seL4 RPC (TBD)

The repo includes two implementations of the tests:

- A version in which the CAmkES was written by hand, under the `program/camkes` directory,
- A version in which the examples are written in AADL and the CAmkES is generated by the KSU ACT tool (located under the `AADL` directory.

Setup for Manual Tests
================

This is the setup for the manually written CAmkES tests under the `program/camkes` directory.
The tests are currently configured to use the ia32 platform,
though this will change to an ARM platform soon.

Tests assume CAmkES 3.5.0 is installed on Ubuntu 18.04 (Bionic) x86_64
or similar Linux distribution.  Initialize your host and the
`camkes-project/` directory per directions at
https://docs.sel4.systems/CAmkES/

Symbolically link the tests of interest into your 
`camkes-project/` directory, for example, to link all tests:

    CTESTS=/home/MYSELF/projects/case/conntests
    cd ~/camkes-project
    ln -s ${CTESTS}/*.sh
    ln -s ${CTESTS}/projects/camkes/apps/* projects/camkes/apps/

Basic Usage
-----

Invoke a script `install-<SOMETEST>.sh` to prepare the build directory.

Enter the build directory just created, and invoke "ninja".
This will take a while.

Run the `./simulate` script to see the results via QEMU.

Exit QEMU console by typing: Ctrl-a x
